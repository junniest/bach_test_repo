\section*{Rezultāti}
\addcontentsline{toc}{section}{Rezultāti}
\label{s:results}

Šajā darbā tiek definēta programmēšanas valodu paplašināšanas sistēmas koncepcija, kas varētu tikt ieviesta jebkādai LL-parsējamai valodai. Sistēmas ideja ir radusies, izstrādājot kompilatoru valodai Eq, un visticamāk tālākos izstrādes posmos sistēma tiks integrēta Eq kompilatorā.

Transformācijas sistēma ir iedvesmota ar divu koda apstrādes principu kombināciju -- ar dinamisko parsēšanu un koda priekšprocesēšanu. Dinamiskas parsēšanas pamatprincips ir valodas gramatikas modificēšana koda parsēšanas laikā, tomēr šai pieejai vispārīgā gadījumā piemīt ļoti mazas valodas gramatikas kontroles iespējās un tās darbam ir nepieciešams specifisks parsētāja modelis, kas ļauj darba laikā modificēt savu parsēšanas tabulu. Vispārpieņemtais priekšprocesēšanas princips ir programmas teksta apstrāde bez iedziļināšanās programmēšanas valodas struktūrā, toties dažās situācijās šāda pieeja ir nepietiekama nopietnām izejas koda modifikācijām.

Sistēmas projektēšanā tika piedāvātas pieejas, kas ļaus izvairīties no abu principu trūkumiem. Sistēma tiks veidota ka virsbūve valodas parsētājam, ielasot noteiktas sintakses makro izteiksmes, kas sastāvēs no tipu aprakstiem, regulāro izteiksmju šablona un transformācijas funkcijas. Sistēma strādās paralēli ar parsētāju, pirms vai pēc katras parsētāja produkcijas pārbaudes izpildot nepieciešamas virkņu transformāciju. Programmas teksti tiks apstrādāti daļiņu veidā, nepieciešamības gadījumā vēršoties pie parsētāja pēc papildus informācijas. Tomēr šī sistēma tiek projektēta neatkarīgi no parsētāja, pieprasot minimālas zināšanas par valodas gramatiku, proti, iespējamo valodas daļiņu un pseido-daļiņu tipus. Tipu zināšana ir nepieciešama, lai ieviestu noteiktu transformāciju korektuma kontroli makro ielasīšanas brīdī.

Šī darba ietvaros tika izstrādāts prototips sakrišanu meklēšanas sistēmai, kura pirmkoda un testu piemēri ir atrodami \ref{ap:code_sample}, \ref{ap:test1_sample}, \ref{ap:test2_sample} un \ref{ap:test3_sample}~pielikumos. Darba izstrādes gaitā tika izveidota algoritmu kopa, kas ļaus efektīvi meklēt daļiņu virkņu sakrišanas ar šabloniem, un izvēlētie algoritmi tika implementēti prototipā. Lai pēc iespējas samazināt šablonu sakrišanu meklēšanas laiku, tika izvēlēts lietot minimizētus determinētus galīgus automātus katra šablona reprezentēšanai. Vēl lielākai apstrādes laika samazināšanai tika izvēlēts apvienot ielasīto regulāro izteiksmju automātus vienā kopīgā automātā. Uz šīs pieejas bāzes tika izveidoti makro šablonu konfliktu risināšanas un programmas tvērumu maiņu apstrādes principi.

Prototipa izstrādes laikā tika identificētas iespējamās problēmas un izņēmumi, kuri ierobežo šablonu sistēmas darbu. Lietojot izvēlēto pieeju, nebūs iespējams grupēt šablonu daļas ar iekavām un adresēt regulāro izteiksmju apakšgrupas, jo automātu determinēšana un minimizēšana pārkārto grupējumus. Sistēma arī nevarēs patstāvīgi apstrādāt daļiņu klašu mantošanās, tam būs nepieciešama saskarne ar parsētāju. Izstrādāto prototipu reālās sistēmas implementācijas gaitā varēs optimizēt, nemainot darbības principu, bet aizstājot izvēlētos algoritmus ar optimālākiem.

Darbs parāda, ka ir iespējams veidot regulāro izteiksmju šablonus un ar to palīdzību attiecīgi meklēt sakrišanas ieejas daļiņu virkni. Gadījumā, ja valodas parsētājs būs modelēts aprakstītā veidā, būs iespējams veikt sakrišanu meklēšanu. Izstrādātais prototips var kļūt par pamatu tālākai transformācijas sistēmas prototipa izstrādei un implementēšanai reālā kompilatorā. Šablonu apakšsistēmās atrastās virknes kalpos ka ieejas dati transformācijas funkcijai. Tipu sistēma, savukārt, lietos regulāro izteiksmju minimizētos automātus, lai pārbaudītu tipu sakritību makro izteiksmju ietvaros.

Darba gaitā tika izpētītas eksistējošās izejas koda apstrādāšanas sistēmas, to īpašības un atšķirības no izvēlētās pieejas. Lielākai meta-programmēšanas sistēmu daļai ir ļoti cieša saistība ar konkrētas programmēšanas valodas implementācijas īpašībām (piem. Lisp un Forth). No otras puses, universālie priekšprocesori apstrādā programmu tekstu, neievērojot valodas struktūru. Aprakstītā sistēma, savukārt, ir pielāgojama dažādām valodām un ar pieeju pie noteiktās saskarnes implementē saikni ar valodas semantiku.

Darba gaitā arī tika sagatavots publikācijas melnraksts, kas apraksta sistēmas koncepciju un pielietošanu. Tālākā sistēmas izstrādes gaitā tas tiks pilnveidots un publicēts. Raksta melnraksts ir atrodams \ref{ap:draft}~pielikumā.